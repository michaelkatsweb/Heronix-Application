<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.heronix.ui.controller.ParaprofessionalManagementController"
      spacing="15" styleClass="card">

    <!-- Title Section -->
    <HBox alignment="CENTER_LEFT" spacing="10" styleClass="card-white-shadow">
        <Label text="ðŸŽ“" styleClass="icon-large"/>
        <VBox spacing="2" HBox.hgrow="ALWAYS">
            <Label text="Paraprofessional Management" styleClass="page-title, text-purple"/>
            <Label text="Manage paraprofessionals and their assignments" styleClass="text-muted, text-small-12"/>
        </VBox>
        <Button text="+ New Para Assignment" onAction="#handleNewAssignment"
               styleClass="button-primary"/>
    </HBox>

    <!-- Quick Stats -->
    <HBox spacing="15" styleClass="padding-vertical-5">
        <!-- Active Para Subs Card -->
        <VBox styleClass="card-white-shadow" HBox.hgrow="ALWAYS">
            <Label text="ðŸ‘¥ Active Paraprofessionals" styleClass="text-muted, text-small-12"/>
            <Label fx:id="activeParaSubsLabel" text="0" styleClass="metric-value, text-purple">
                <padding><Insets top="8"/></padding>
            </Label>
            <Label text="Available for assignments" styleClass="label-10-gray">
                <padding><Insets top="5"/></padding>
            </Label>
        </VBox>

        <!-- Today's Assignments Card -->
        <VBox styleClass="card-white-shadow" HBox.hgrow="ALWAYS">
            <Label text="ðŸ“… Today's Assignments" styleClass="text-muted, text-small-12"/>
            <Label fx:id="todaysAssignmentsLabel" text="0" styleClass="metric-value, text-primary">
                <padding><Insets top="8"/></padding>
            </Label>
            <Label text="Para assignments today" styleClass="label-10-gray">
                <padding><Insets top="5"/></padding>
            </Label>
        </VBox>

        <!-- Pending Card -->
        <VBox styleClass="card-white-shadow" HBox.hgrow="ALWAYS">
            <Label text="â³ Pending" styleClass="text-muted, text-small-12"/>
            <Label fx:id="pendingAssignmentsLabel" text="0" styleClass="metric-value, text-warning">
                <padding><Insets top="8"/></padding>
            </Label>
            <Label text="Awaiting confirmation" styleClass="label-10-gray">
                <padding><Insets top="5"/></padding>
            </Label>
        </VBox>

        <!-- This Month Hours Card -->
        <VBox styleClass="card-white-shadow" HBox.hgrow="ALWAYS">
            <Label text="â±ï¸ This Month" styleClass="text-muted, text-small-12"/>
            <Label fx:id="monthlyHoursLabel" text="0.0" styleClass="metric-value, text-success">
                <padding><Insets top="8"/></padding>
            </Label>
            <Label text="Total hours" styleClass="label-10-gray">
                <padding><Insets top="5"/></padding>
            </Label>
        </VBox>
    </HBox>

    <!-- Tab Pane -->
    <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">

        <!-- Assignments Tab -->
        <Tab text="ðŸ“… Assignments">
            <VBox spacing="15" styleClass="content-padding-15">

                <!-- Filters -->
                <HBox spacing="10" alignment="CENTER_LEFT" styleClass="filter-section-white">
                    <Label text="Filter:" styleClass="label-bold"/>

                    <VBox spacing="2">
                        <Label text="Date Range" styleClass="label-10-gray"/>
                        <DatePicker fx:id="filterStartDatePicker" promptText="Start date" style="-fx-pref-width: 130;"/>
                    </VBox>

                    <Label text="to" style="-fx-padding: 0 5;"/>

                    <VBox spacing="2">
                        <Label text=" " style="-fx-font-size: 10;"/>
                        <DatePicker fx:id="filterEndDatePicker" promptText="End date" style="-fx-pref-width: 130;"/>
                    </VBox>

                    <VBox spacing="2">
                        <Label text="Status" styleClass="label-10-gray"/>
                        <ComboBox fx:id="filterStatusComboBox" promptText="All statuses" style="-fx-pref-width: 150;"/>
                    </VBox>

                    <VBox spacing="2">
                        <Label text="Paraprofessional" styleClass="label-10-gray"/>
                        <ComboBox fx:id="filterSubstituteComboBox" promptText="All paraprofessionals" style="-fx-pref-width: 180;"/>
                    </VBox>

                    <Region HBox.hgrow="ALWAYS"/>

                    <Button text="ðŸ” Search" onAction="#handleSearchAssignments"
                           styleClass="button-primary"/>
                    <Button text="Clear" onAction="#handleClearFilters"
                           styleClass="button-primary"/>
                </HBox>

                <!-- Assignments Table -->
                <VBox VBox.vgrow="ALWAYS" styleClass="filter-section-white">
                    <TableView fx:id="assignmentsTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="assignmentDateColumn" text="Date" prefWidth="100"/>
                            <TableColumn fx:id="assignmentSubstituteColumn" text="Paraprofessional" prefWidth="150"/>
                            <TableColumn fx:id="assignmentTimeColumn" text="Time" prefWidth="120"/>
                            <TableColumn fx:id="assignmentDurationColumn" text="Duration" prefWidth="100"/>
                            <TableColumn fx:id="assignmentReplacedStaffColumn" text="Replaced Para" prefWidth="150"/>
                            <TableColumn fx:id="assignmentReasonColumn" text="Reason" prefWidth="130"/>
                            <TableColumn fx:id="assignmentRoomColumn" text="Room" prefWidth="80"/>
                            <TableColumn fx:id="assignmentStatusColumn" text="Status" prefWidth="100"/>
                            <TableColumn fx:id="assignmentActionsColumn" text="Actions" prefWidth="120"/>
                        </columns>
                        <placeholder>
                            <Label text="No paraprofessional assignments found. Click '+ New Para Assignment' to create one." styleClass="text-muted-light"/>
                        </placeholder>
                    </TableView>

                    <HBox spacing="10" alignment="CENTER_LEFT" styleClass="padding-top-10">
                        <Label fx:id="assignmentCountLabel" text="Total: 0 assignments" styleClass="text-muted, text-small-12"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="ðŸ”„ Refresh" onAction="#handleRefreshAssignments"
                               styleClass="button-primary"/>
                    </HBox>
                </VBox>

            </VBox>
        </Tab>

        <!-- Paraprofessionals Tab -->
        <Tab text="ðŸŽ“ Paraprofessionals">
            <VBox spacing="15" styleClass="content-padding-15">

                <!-- Search and Add -->
                <HBox spacing="10" alignment="CENTER_LEFT" styleClass="filter-section-white">
                    <Label text="Search:" styleClass="label-bold"/>
                    <TextField fx:id="substituteSearchField" promptText="Search by name, email, or phone" style="-fx-pref-width: 300;"/>
                    <Button text="ðŸ” Search" onAction="#handleSearchSubstitutes"
                           styleClass="button-primary"/>

                    <Region HBox.hgrow="ALWAYS"/>

                    <Button text="+ Add Paraprofessional" onAction="#handleAddSubstitute"
                           styleClass="button-primary"/>
                </HBox>

                <!-- Substitutes Table -->
                <VBox VBox.vgrow="ALWAYS" styleClass="filter-section-white">
                    <TableView fx:id="substitutesTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="substituteNameColumn" text="Name" prefWidth="180"/>
                            <TableColumn fx:id="substituteTypeColumn" text="Type" prefWidth="120"/>
                            <TableColumn fx:id="substituteEmailColumn" text="Email" prefWidth="200"/>
                            <TableColumn fx:id="substitutePhoneColumn" text="Phone" prefWidth="130"/>
                            <TableColumn fx:id="substituteStatusColumn" text="Status" prefWidth="100"/>
                            <TableColumn fx:id="substituteAssignmentsColumn" text="Total Assignments" prefWidth="130"/>
                            <TableColumn fx:id="substituteActionsColumn" text="Actions" prefWidth="120"/>
                        </columns>
                        <placeholder>
                            <Label text="No paraprofessionals found. Click '+ Add Paraprofessional' to add one." styleClass="text-muted-light"/>
                        </placeholder>
                    </TableView>

                    <HBox spacing="10" alignment="CENTER_LEFT" styleClass="padding-top-10">
                        <Label fx:id="substituteCountLabel" text="Total: 0 paraprofessionalstitutes" styleClass="text-muted, text-small-12"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="ðŸ”„ Refresh" onAction="#handleRefreshSubstitutes"
                               styleClass="button-primary"/>
                    </HBox>
                </VBox>

            </VBox>
        </Tab>

        <!-- Reports Tab -->
        <Tab text="ðŸ“Š Reports">
            <VBox spacing="15" styleClass="content-padding-15">

                <VBox spacing="10" styleClass="form-panel">
                    <Label text="Generate Paraprofessional Reports" styleClass="section-header-16"/>
                    <Separator/>

                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <VBox spacing="5">
                            <Label text="Report Type" styleClass="label-hint-666"/>
                            <ComboBox fx:id="reportTypeComboBox" promptText="Select report type" style="-fx-pref-width: 280;"/>
                        </VBox>

                        <VBox spacing="5">
                            <Label text="Start Date" styleClass="label-hint-666"/>
                            <DatePicker fx:id="reportStartDatePicker" style="-fx-pref-width: 150;"/>
                        </VBox>

                        <VBox spacing="5">
                            <Label text="End Date" styleClass="label-hint-666"/>
                            <DatePicker fx:id="reportEndDatePicker" style="-fx-pref-width: 150;"/>
                        </VBox>

                        <Region HBox.hgrow="ALWAYS"/>

                        <VBox spacing="5">
                            <Label text=" " styleClass="label-11"/>
                            <Button text="ðŸ“Š Generate Report" onAction="#handleGenerateReport"
                                   styleClass="button-primary"/>
                        </VBox>
                    </HBox>
                </VBox>

                <VBox VBox.vgrow="ALWAYS" styleClass="form-panel">
                    <Label text="Available Reports for Paraprofessionals:" styleClass="label-14-bold-padding"/>

                    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" styleClass="scroll-pane-transparent">
                        <VBox spacing="10" styleClass="content-padding-10">
                            <VBox styleClass="card">
                                <Label text="ðŸ“Š Para Usage Summary" styleClass="label-13-bold"/>
                                <Label text="Comprehensive overview of paraprofessional substitute usage, including hours worked, assignments completed, and utilization rates." wrapText="true" styleClass="text-muted, text-small">
                                    <padding><Insets top="5"/></padding>
                                </Label>
                            </VBox>

                            <VBox styleClass="card">
                                <Label text="ðŸ“… Para Assignments by Date Range" styleClass="label-13-bold"/>
                                <Label text="Detailed list of all paraprofessional assignments within a specific date range, including assignment details and status." wrapText="true" styleClass="text-muted, text-small">
                                    <padding><Insets top="5"/></padding>
                                </Label>
                            </VBox>

                            <VBox styleClass="card">
                                <Label text="â±ï¸ Para Hours Report" styleClass="label-13-bold"/>
                                <Label text="Summary of total hours worked by each paraprofessional substitute, useful for payroll and tracking." wrapText="true" styleClass="text-muted, text-small">
                                    <padding><Insets top="5"/></padding>
                                </Label>
                            </VBox>

                            <VBox styleClass="card">
                                <Label text="ðŸ’° Para Cost Analysis" styleClass="label-13-bold"/>
                                <Label text="Financial breakdown of paraprofessional substitute costs, including pay rates and total expenditures." wrapText="true" styleClass="text-muted, text-small">
                                    <padding><Insets top="5"/></padding>
                                </Label>
                            </VBox>
                        </VBox>
                    </ScrollPane>
                </VBox>

            </VBox>
        </Tab>

    </TabPane>

</VBox>
