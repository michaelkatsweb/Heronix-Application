<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.heronix.ui.controller.SubstituteManagementUIController"
      spacing="15" styleClass="card">


    <!-- Title Section -->
    <HBox alignment="CENTER_LEFT" spacing="10" styleClass="section-white">
        <Label text="ðŸ‘¥" styleClass="icon-large"/>
        <VBox spacing="2" HBox.hgrow="ALWAYS">
            <Label text="Substitute Management" styleClass="header-large"/>
            <Label text="Manage substitutes and their assignments" styleClass="text-muted-666"/>
        </VBox>
        <Button text="+ New Assignment" onAction="#handleNewAssignment"
               styleClass="button-success"/>
        <Button text="ðŸ“¥ Substitute Data Import" onAction="#handleImportFrontline"
               styleClass="button-primary"/>
    </HBox>

    <!-- Tab Pane -->
    <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">

        <!-- Assignments Tab -->
        <Tab text="ðŸ“… Assignments">
            <VBox spacing="15" styleClass="tab-content-padding">

                <!-- Filters -->
                <HBox spacing="10" alignment="CENTER_LEFT" styleClass="filter-section">
                    <Label text="Filter:" styleClass="label-bold"/>

                    <VBox spacing="2">
                        <Label text="Date Range" styleClass="label-small-muted"/>
                        <DatePicker fx:id="filterStartDatePicker" promptText="Start date" prefWidth="130"/>
                    </VBox>

                    <Label text="to" styleClass="label-padded"/>

                    <VBox spacing="2">
                        <Label text=" " styleClass="label-small"/>
                        <DatePicker fx:id="filterEndDatePicker" promptText="End date" prefWidth="130"/>
                    </VBox>

                    <VBox spacing="2">
                        <Label text="Status" styleClass="label-small-muted"/>
                        <ComboBox fx:id="filterStatusComboBox" promptText="All statuses" prefWidth="150"/>
                    </VBox>

                    <VBox spacing="2">
                        <Label text="Substitute" styleClass="label-small-muted"/>
                        <ComboBox fx:id="filterSubstituteComboBox" promptText="All substitutes" prefWidth="180"/>
                    </VBox>

                    <Region HBox.hgrow="ALWAYS"/>

                    <Button text="ðŸ” Search" onAction="#handleSearchAssignments"
                           styleClass="button-primary"/>
                    <Button text="Clear" onAction="#handleClearFilters"
                           styleClass="button-primary"/>
                </HBox>

                <!-- Assignments Table -->
                <VBox VBox.vgrow="ALWAYS" styleClass="table-section">
                    <TableView fx:id="assignmentsTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="assignmentDateColumn" text="Date" prefWidth="100"/>
                            <TableColumn fx:id="assignmentSubstituteColumn" text="Substitute" prefWidth="150"/>
                            <TableColumn fx:id="assignmentTimeColumn" text="Time" prefWidth="120"/>
                            <TableColumn fx:id="assignmentDurationColumn" text="Duration" prefWidth="100"/>
                            <TableColumn fx:id="assignmentReplacedStaffColumn" text="Replaced Staff" prefWidth="150"/>
                            <TableColumn fx:id="assignmentReasonColumn" text="Reason" prefWidth="130"/>
                            <TableColumn fx:id="assignmentRoomColumn" text="Room" prefWidth="80"/>
                            <TableColumn fx:id="assignmentStatusColumn" text="Status" prefWidth="100"/>
                            <TableColumn fx:id="assignmentActionsColumn" text="Actions" prefWidth="120"/>
                        </columns>
                        <placeholder>
                            <Label text="No assignments found. Click '+ New Assignment' to create one." styleClass="text-muted-light"/>
                        </placeholder>
                    </TableView>

                    <HBox spacing="10" alignment="CENTER_LEFT" styleClass="table-footer">
                        <Label fx:id="assignmentCountLabel" text="Total: 0 assignments" styleClass="text-muted-666"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="ðŸ”„ Refresh" onAction="#handleRefreshAssignments"
                               styleClass="button-primary"/>
                    </HBox>
                </VBox>

            </VBox>
        </Tab>

        <!-- Substitutes Tab -->
        <Tab text="ðŸ‘¤ Substitutes">
            <VBox spacing="15" styleClass="tab-content-padding">

                <!-- Substitute Actions -->
                <HBox spacing="10" alignment="CENTER_LEFT" styleClass="filter-section">
                    <TextField fx:id="substituteSearchField" promptText="Search by name or employee ID..."
                              HBox.hgrow="ALWAYS" styleClass="search-field-padded"/>
                    <Button text="ðŸ” Search" onAction="#handleSearchSubstitutes"
                           styleClass="button-primary"/>
                    <Button text="+ Add Substitute" onAction="#handleAddSubstitute"
                           styleClass="button-success"/>
                    <Button text="ðŸ“¥ Import CSV" onAction="#handleImportThirdPartyCSV"
                           styleClass="button-primary"/>
                </HBox>

                <!-- Substitutes Table -->
                <VBox VBox.vgrow="ALWAYS" styleClass="table-section">
                    <TableView fx:id="substitutesTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="subNameColumn" text="Name" prefWidth="150"/>
                            <TableColumn fx:id="subEmployeeIdColumn" text="Employee ID" prefWidth="120"/>
                            <TableColumn fx:id="subTypeColumn" text="Type" prefWidth="130"/>
                            <TableColumn fx:id="subEmailColumn" text="Email" prefWidth="180"/>
                            <TableColumn fx:id="subPhoneColumn" text="Phone" prefWidth="120"/>
                            <TableColumn fx:id="subCertificationsColumn" text="Certifications" prefWidth="150"/>
                            <TableColumn fx:id="subStatusColumn" text="Status" prefWidth="80"/>
                            <TableColumn fx:id="subActionsColumn" text="Actions" prefWidth="180"/>
                        </columns>
                        <placeholder>
                            <Label text="No substitutes found. Click '+ Add Substitute' to add one." styleClass="text-muted-light"/>
                        </placeholder>
                    </TableView>

                    <HBox spacing="10" alignment="CENTER_LEFT" styleClass="table-footer">
                        <Label fx:id="substituteCountLabel" text="Total: 0 substitutes" styleClass="text-muted-666"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="ðŸ”„ Refresh" onAction="#handleRefreshSubstitutes"
                               styleClass="button-primary"/>
                    </HBox>
                </VBox>

            </VBox>
        </Tab>

        <!-- Calendar Tab -->
        <Tab text="ðŸ“† Calendar View">
            <VBox spacing="15" styleClass="tab-content-padding" alignment="CENTER">
                <Label text="ðŸ“†" styleClass="icon-xlarge"/>
                <Label text="Calendar View" styleClass="header-large"/>
                <Label text="Coming soon! View all substitute assignments in a calendar format."
                      styleClass="text-muted-large" wrapText="true" textAlignment="CENTER"/>
            </VBox>
        </Tab>

        <!-- Reports Tab -->
        <Tab text="ðŸ“Š Reports">
            <VBox spacing="15" styleClass="tab-content-padding">

                <!-- Report Options -->
                <VBox spacing="10" styleClass="report-section">
                    <Label text="Generate Reports" styleClass="report-section-title"/>

                    <HBox spacing="15">
                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <Label text="Report Type" styleClass="form-label-12"/>
                            <ComboBox fx:id="reportTypeComboBox" promptText="Select report type..."
                                     HBox.hgrow="ALWAYS" maxWidth="Infinity" styleClass="search-field-padded"/>
                        </VBox>
                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <Label text="Date Range" styleClass="form-label-12"/>
                            <HBox spacing="5">
                                <DatePicker fx:id="reportStartDatePicker" promptText="Start" HBox.hgrow="ALWAYS"/>
                                <Label text="to" styleClass="label-padded"/>
                                <DatePicker fx:id="reportEndDatePicker" promptText="End" HBox.hgrow="ALWAYS"/>
                            </HBox>
                        </VBox>
                    </HBox>

                    <Button text="ðŸ“„ Generate Report" onAction="#handleGenerateReport"
                           styleClass="button-primary"/>
                </VBox>

                <!-- Statistics Cards -->
                <GridPane hgap="15" vgap="15">
                    <!-- Card 1 -->
                    <VBox spacing="5" GridPane.columnIndex="0" GridPane.rowIndex="0"
                         styleClass="stat-card-report">
                        <Label text="ðŸ“… This Week" styleClass="text-muted-666"/>
                        <Label fx:id="statsThisWeekLabel" text="0" styleClass="stat-value-28-blue"/>
                        <Label text="Assignments" styleClass="label-hint"/>
                    </VBox>

                    <!-- Card 2 -->
                    <VBox spacing="5" GridPane.columnIndex="1" GridPane.rowIndex="0"
                         styleClass="stat-card-report">
                        <Label text="ðŸ“† This Month" styleClass="text-muted-666"/>
                        <Label fx:id="statsThisMonthLabel" text="0" styleClass="stat-value-28-green"/>
                        <Label text="Assignments" styleClass="label-hint"/>
                    </VBox>

                    <!-- Card 3 -->
                    <VBox spacing="5" GridPane.columnIndex="2" GridPane.rowIndex="0"
                         styleClass="stat-card-report">
                        <Label text="ðŸ‘¥ Active Substitutes" styleClass="text-muted-666"/>
                        <Label fx:id="statsActiveSubsLabel" text="0" styleClass="stat-value-28-purple"/>
                        <Label text="Available" styleClass="label-hint"/>
                    </VBox>

                    <!-- Card 4 -->
                    <VBox spacing="5" GridPane.columnIndex="3" GridPane.rowIndex="0"
                         styleClass="stat-card-report">
                        <Label text="ðŸ’° Total Hours" styleClass="text-muted-666"/>
                        <Label fx:id="statsTotalHoursLabel" text="0.0" styleClass="stat-value-28-orange"/>
                        <Label text="This Month" styleClass="label-hint"/>
                    </VBox>
                </GridPane>

            </VBox>
        </Tab>

    </TabPane>

</VBox>
