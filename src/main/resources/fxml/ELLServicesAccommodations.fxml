<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.heronix.ui.controller.ELLServicesAccommodationsController"
            prefWidth="1400" prefHeight="900">


    <!-- Top: Header -->
    <top>
        <VBox spacing="15" styleClass="card">
            <Label text="ELL Services &amp; Accommodations Management"
                   styleClass="page-title-white"/>
            <Label text="Document service delivery, track accommodations, and ensure implementation fidelity"
                   styleClass="text-white"/>
        </VBox>
    </top>

    <!-- Center: Main Content -->
    <center>
        <ScrollPane fitToWidth="true" styleClass="main-container">
            <VBox spacing="25" styleClass="content-padding-25">

                <!-- Tab Pane for Services vs Accommodations -->
                <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">

                    <!-- Services Tab -->
                    <Tab text="ELL Service Delivery">
                        <ScrollPane fitToWidth="true">
                            <VBox spacing="25" styleClass="content-padding-25">

                                <!-- Student & Service Information -->
                                <VBox spacing="15" styleClass="form-section-bordered">
                                    <Label text="Student &amp; Service Information" styleClass="section-title"/>

                                    <GridPane hgap="15" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                        </columnConstraints>

                                        <Label text="ELL Student:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <ComboBox fx:id="serviceStudentComboBox" promptText="Select Student..." maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Grade:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                                        <TextField fx:id="serviceGradeField" editable="false" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                                        <Label text="Service Date:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <DatePicker fx:id="serviceDatePicker" maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                        <Label text="Service Type:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                                        <ComboBox fx:id="serviceTypeComboBox" promptText="Select Type..." maxWidth="Infinity" GridPane.columnIndex="3" GridPane.rowIndex="1"/>

                                        <Label text="Delivery Model:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <ComboBox fx:id="deliveryModelComboBox" promptText="Select Model..." maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                                        <Label text="Duration (Minutes):" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="2"/>
                                        <TextField fx:id="durationMinutesField" promptText="Minutes" GridPane.columnIndex="3" GridPane.rowIndex="2"/>

                                        <Label text="Service Provider:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                                        <ComboBox fx:id="serviceProviderComboBox" promptText="Select Teacher..." maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="3"/>

                                        <Label text="Focus Area:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="3"/>
                                        <ComboBox fx:id="focusAreaComboBox" promptText="Select Focus..." maxWidth="Infinity" GridPane.columnIndex="3" GridPane.rowIndex="3"/>
                                    </GridPane>
                                </VBox>

                                <!-- Lesson Details -->
                                <VBox spacing="15" styleClass="form-section-bordered">
                                    <Label text="Lesson Details" styleClass="section-title"/>

                                    <GridPane hgap="15" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="75"/>
                                        </columnConstraints>

                                        <Label text="Lesson Topic:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <TextField fx:id="lessonTopicField" promptText="Topic of the lesson" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Objectives:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <TextArea fx:id="objectivesArea" promptText="Lesson objectives and learning goals" wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                        <Label text="Activities:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <TextArea fx:id="activitiesArea" promptText="Activities and instructional strategies used" wrapText="true" prefRowCount="3" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                                        <Label text="Materials Used:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                                        <TextArea fx:id="materialsUsedArea" promptText="Books, worksheets, resources, etc." wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.rowIndex="3"/>
                                    </GridPane>
                                </VBox>

                                <!-- Attendance & Participation -->
                                <VBox spacing="15" styleClass="form-section-bordered">
                                    <Label text="Attendance &amp; Participation" styleClass="section-title"/>

                                    <GridPane hgap="15" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                        </columnConstraints>

                                        <Label text="Service Status:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <ComboBox fx:id="serviceStatusComboBox" promptText="Select Status..." maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Student Attended:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                                        <CheckBox fx:id="studentAttendedCheckBox" text="Yes, student attended" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                                        <Label text="Absence Reason:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <TextField fx:id="absenceReasonField" promptText="Reason if absent" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="1"/>

                                        <Label text="Participation Level:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <ComboBox fx:id="participationLevelComboBox" promptText="Select Level..." maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                                        <Label text="Class Size:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="2"/>
                                        <TextField fx:id="classSizeField" promptText="Number of students" GridPane.columnIndex="3" GridPane.rowIndex="2"/>

                                        <Label text="Location:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                                        <TextField fx:id="serviceLocationField" promptText="Room, building, etc." GridPane.columnIndex="1" GridPane.rowIndex="3"/>

                                        <Label text="Group Composition:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="3"/>
                                        <TextField fx:id="groupCompositionField" promptText="Mixed levels, same level, etc." GridPane.columnIndex="3" GridPane.rowIndex="3"/>
                                    </GridPane>
                                </VBox>

                                <!-- Progress Notes -->
                                <VBox spacing="15" styleClass="card, metric-success">
                                    <Label text="Progress &amp; Observations" styleClass="section-title-success"/>

                                    <GridPane hgap="15" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="75"/>
                                        </columnConstraints>

                                        <Label text="Progress Notes:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <TextArea fx:id="progressNotesArea" promptText="Student's progress and performance during the session" wrapText="true" prefRowCount="3" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Skills Demonstrated:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <TextArea fx:id="skillsDemonstratedArea" promptText="Skills the student successfully demonstrated" wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                        <Label text="Areas for Improvement:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <TextArea fx:id="areasForImprovementArea" promptText="Skills or areas that need additional support" wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                                    </GridPane>
                                </VBox>

                                <!-- Assessment & Standards -->
                                <VBox spacing="15" styleClass="form-section-bordered">
                                    <Label text="Assessment &amp; Standards" styleClass="section-title"/>

                                    <GridPane hgap="15" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="75"/>
                                        </columnConstraints>

                                        <Label text="Standards Addressed:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <TextArea fx:id="standardsAddressedArea" promptText="ELP standards or other standards addressed" wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Assessment:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <CheckBox fx:id="assessmentAdministeredCheckBox" text="Assessment Administered During Session" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                        <Label text="Assessment Results:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <TextArea fx:id="assessmentResultsArea" promptText="Assessment results and observations" wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                                    </GridPane>
                                </VBox>

                                <!-- Technology & Resources -->
                                <VBox spacing="15" styleClass="form-section-bordered">
                                    <Label text="Technology &amp; Resources" styleClass="section-title"/>

                                    <GridPane hgap="15" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="75"/>
                                        </columnConstraints>

                                        <Label text="Technology Used:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <CheckBox fx:id="technologyUsedCheckBox" text="Technology was used during this session" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Technology Details:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <TextField fx:id="technologyDetailsField" promptText="Software, apps, devices used" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                                    </GridPane>
                                </VBox>

                                <!-- Follow-up & Homework -->
                                <VBox spacing="15" styleClass="form-section-bordered">
                                    <Label text="Follow-up &amp; Homework" styleClass="section-title"/>

                                    <GridPane hgap="15" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="75"/>
                                        </columnConstraints>

                                        <Label text="Homework:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <CheckBox fx:id="homeworkAssignedCheckBox" text="Homework Assigned" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Homework Description:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <TextField fx:id="homeworkDescriptionField" promptText="Description of homework assignment" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                        <Label text="Follow-up Needed:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <CheckBox fx:id="followUpNeededCheckBox" text="Follow-up required" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                                        <Label text="Follow-up Notes:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                                        <TextArea fx:id="followUpNotesArea" promptText="Actions needed, areas to revisit, etc." wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.rowIndex="3"/>
                                    </GridPane>
                                </VBox>

                                <!-- Title III Compliance -->
                                <VBox spacing="15" styleClass="card">
                                    <HBox spacing="10" alignment="CENTER_LEFT">
                                        <Label text="ðŸ“Š Title III Compliance" styleClass="section-title-warning"/>
                                    </HBox>
                                    <Label text="Title III of ESSA requires documentation of services provided to English Language Learners." wrapText="true" styleClass="label-12"/>

                                    <GridPane hgap="15" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="50"/>
                                            <ColumnConstraints percentWidth="50"/>
                                        </columnConstraints>

                                        <CheckBox fx:id="titleIIIFundedCheckBox" text="Service is Title III Funded" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <CheckBox fx:id="reportedForComplianceCheckBox" text="Service Reported for Compliance" styleClass="form-label" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                                    </GridPane>
                                </VBox>

                            </VBox>
                        </ScrollPane>
                    </Tab>

                    <!-- Accommodations Tab -->
                    <Tab text="ELL Accommodations">
                        <ScrollPane fitToWidth="true">
                            <VBox spacing="25" styleClass="content-padding-25">

                                <!-- Student & Accommodation Information -->
                                <VBox spacing="15" styleClass="form-section-bordered">
                                    <Label text="Student &amp; Accommodation Information" styleClass="section-title"/>

                                    <GridPane hgap="15" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                        </columnConstraints>

                                        <Label text="ELL Student:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <ComboBox fx:id="accommodationStudentComboBox" promptText="Select Student..." maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Grade:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                                        <TextField fx:id="accommodationGradeField" editable="false" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                                        <Label text="Category:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <ComboBox fx:id="accommodationCategoryComboBox" promptText="Select Category..." maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                        <Label text="Status:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                                        <CheckBox fx:id="accommodationActiveCheckBox" text="Active" selected="true" GridPane.columnIndex="3" GridPane.rowIndex="1"/>

                                        <Label text="Description:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <TextArea fx:id="accommodationDescriptionArea" promptText="Detailed description of the accommodation" wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="2"/>

                                        <Label text="Implementation:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                                        <TextArea fx:id="implementationInstructionsArea" promptText="Step-by-step instructions for implementing this accommodation" wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="3"/>
                                    </GridPane>
                                </VBox>

                                <!-- Applicability -->
                                <VBox spacing="15" styleClass="form-section-bordered">
                                    <Label text="Applicability" styleClass="section-title"/>

                                    <GridPane hgap="15" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="75"/>
                                        </columnConstraints>

                                        <Label text="Class Applicability:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <CheckBox fx:id="appliesToAllClassesCheckBox" text="Applies to All Classes" selected="true" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Applicable Subjects:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <TextField fx:id="applicableSubjectsField" promptText="Comma-separated list (e.g., Math, Science, ELA)" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                        <Label text="Applicable Classes:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <TextField fx:id="applicableClassesField" promptText="Comma-separated list of class names" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                                        <Label text="Frequency:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                                        <TextField fx:id="frequencyField" promptText="Daily, weekly, as needed, etc." GridPane.columnIndex="1" GridPane.rowIndex="3"/>

                                        <Label text="Responsible Party:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="4"/>
                                        <TextField fx:id="responsiblePartyField" promptText="Person(s) responsible for implementation" GridPane.columnIndex="1" GridPane.rowIndex="4"/>
                                    </GridPane>
                                </VBox>

                                <!-- Testing Accommodations -->
                                <VBox spacing="15" styleClass="card, metric-warning">
                                    <Label text="Testing Accommodations" styleClass="section-title-orange"/>

                                    <GridPane hgap="15" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                        </columnConstraints>

                                        <Label text="Classroom Tests:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <CheckBox fx:id="appliesToClassroomTestsCheckBox" text="Applies to Classroom Tests" selected="true" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="State Tests:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                                        <CheckBox fx:id="appliesToStateTestsCheckBox" text="Applies to State Tests" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                                        <Label text="State Approved:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <CheckBox fx:id="stateTestingApprovedCheckBox" text="State Testing Approved" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                        <Label text="Approval Date:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                                        <DatePicker fx:id="stateTestingApprovalDatePicker" maxWidth="Infinity" GridPane.columnIndex="3" GridPane.rowIndex="1"/>

                                        <Label text="Testing Notes:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <TextArea fx:id="testingNotesArea" promptText="Special notes about testing accommodations" wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="2"/>
                                    </GridPane>
                                </VBox>

                                <!-- Implementation Timeline -->
                                <VBox spacing="15" styleClass="form-section-bordered">
                                    <Label text="Implementation Timeline" styleClass="section-title"/>

                                    <GridPane hgap="15" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                        </columnConstraints>

                                        <Label text="Effective Date:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <DatePicker fx:id="effectiveDatePicker" maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="End Date:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                                        <DatePicker fx:id="endDatePicker" maxWidth="Infinity" GridPane.columnIndex="3" GridPane.rowIndex="0"/>
                                    </GridPane>
                                </VBox>

                                <!-- Teacher Training & Distribution -->
                                <VBox spacing="15" styleClass="card, metric-info">
                                    <Label text="Teacher Training &amp; Distribution" styleClass="section-title-blue"/>

                                    <GridPane hgap="15" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                        </columnConstraints>

                                        <Label text="Training Required:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <CheckBox fx:id="requiresTeacherTrainingCheckBox" text="Requires Teacher Training" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Training Completed:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                                        <CheckBox fx:id="trainingCompletedCheckBox" text="Training Completed" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                                        <Label text="Training Date:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <DatePicker fx:id="trainingDatePicker" maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                        <Label text="Distributed to Teachers:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                                        <CheckBox fx:id="distributedToTeachersCheckBox" text="Distributed" GridPane.columnIndex="3" GridPane.rowIndex="1"/>

                                        <Label text="Distribution Date:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <DatePicker fx:id="distributionDatePicker" maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                                        <Label text="Teachers Notified:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="2"/>
                                        <TextField fx:id="teachersNotifiedField" promptText="Comma-separated list of teacher names" GridPane.columnIndex="3" GridPane.rowIndex="2"/>
                                    </GridPane>
                                </VBox>

                                <!-- Implementation Monitoring -->
                                <VBox spacing="15" styleClass="card">
                                    <Label text="Implementation Monitoring" styleClass="section-title-purple"/>

                                    <GridPane hgap="15" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                            <ColumnConstraints percentWidth="25"/>
                                        </columnConstraints>

                                        <Label text="Last Monitored:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <DatePicker fx:id="lastMonitoredDatePicker" maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Effectiveness (1-5):" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                                        <TextField fx:id="effectivenessRatingField" promptText="1-5 rating" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                                        <Label text="Fidelity (1-5):" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <TextField fx:id="implementationFidelityField" promptText="1-5 rating" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                        <Label text="Monitoring Notes:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <TextArea fx:id="monitoringNotesArea" promptText="Observations about implementation" wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="2"/>

                                        <Label text="Concerns:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                                        <TextArea fx:id="concernsArea" promptText="Any concerns about effectiveness or implementation" wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="3"/>
                                    </GridPane>
                                </VBox>

                            </VBox>
                        </ScrollPane>
                    </Tab>

                </TabPane>

            </VBox>
        </ScrollPane>
    </center>

    <!-- Bottom: Action Buttons -->
    <bottom>
        <HBox spacing="15" alignment="CENTER_RIGHT" styleClass="footer-white-border">
            <Button fx:id="saveButton" text="Save" onAction="#handleSave"
                    styleClass="button-primary"/>
            <Button fx:id="cancelButton" text="Cancel" onAction="#handleCancel"
                    styleClass="header-danger"/>
        </HBox>
    </bottom>

</BorderPane>
