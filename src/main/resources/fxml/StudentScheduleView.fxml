<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<!--
Student Schedule Viewer
Displays individual student class schedule with rooms, teachers, and times
Inspired by Skyward and other SIS systems

Location: src/main/resources/fxml/StudentScheduleView.fxml
-->

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.heronix.ui.controller.StudentScheduleViewController"
            prefWidth="1000" prefHeight="700">

    <top>
        <VBox spacing="15" styleClass="header-white-bottom-border">
            <padding>
                <Insets top="20" right="20" bottom="15" left="20"/>
            </padding>

            <!-- Header -->
            <HBox spacing="15" alignment="CENTER_LEFT">
                <Label text="Student Schedule" style="-fx-font-size: 24; -fx-font-weight: bold;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="Print Schedule" onAction="#handlePrint" styleClass="primary-button"/>
                <Button text="Export PDF" onAction="#handleExportPDF" styleClass="secondary-button"/>
                <Button text="Close" onAction="#handleClose" styleClass="secondary-button"/>
            </HBox>

            <!-- Student Selection & Info -->
            <HBox spacing="20" alignment="CENTER_LEFT">
                <VBox spacing="5" HBox.hgrow="ALWAYS">
                    <Label text="Select Student:" styleClass="form-label"/>
                    <ComboBox fx:id="studentComboBox" prefWidth="350"
                              promptText="Search by name or student ID"
                              onAction="#handleStudentSelection"/>
                </VBox>

                <Separator orientation="VERTICAL"/>

                <!-- Student Info Card -->
                <VBox fx:id="studentInfoBox" spacing="5" styleClass="card">
                    <HBox spacing="10">
                        <Label text="Name:" style="-fx-font-weight: bold; -fx-min-width: 80;"/>
                        <Label fx:id="studentNameLabel" text="--"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="Student ID:" style="-fx-font-weight: bold; -fx-min-width: 80;"/>
                        <Label fx:id="studentIdLabel" text="--"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="Grade:" style="-fx-font-weight: bold; -fx-min-width: 80;"/>
                        <Label fx:id="gradeLabel" text="--"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="IEP/504:" style="-fx-font-weight: bold; -fx-min-width: 80;"/>
                        <Label fx:id="specialNeedsLabel" text="--"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="Gifted:" style="-fx-font-weight: bold; -fx-min-width: 80;"/>
                        <Label fx:id="giftedLabel" text="--"/>
                    </HBox>
                </VBox>
            </HBox>
        </VBox>
    </top>

    <center>
        <VBox spacing="10" BorderPane.alignment="CENTER">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>

            <!-- Schedule Table -->
            <TableView fx:id="scheduleTable" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="periodColumn" text="Period" prefWidth="80"/>
                    <TableColumn fx:id="timeColumn" text="Time" prefWidth="120"/>
                    <TableColumn fx:id="courseColumn" text="Course" prefWidth="200"/>
                    <TableColumn fx:id="courseCodeColumn" text="Code" prefWidth="100"/>
                    <TableColumn fx:id="teacherColumn" text="Teacher" prefWidth="150"/>
                    <TableColumn fx:id="roomColumn" text="Room" prefWidth="80"/>
                    <TableColumn fx:id="extensionColumn" text="Ext." prefWidth="60"/>
                    <TableColumn fx:id="notesColumn" text="Notes" prefWidth="150"/>
                </columns>
                <placeholder>
                    <Label text="No schedule available. Please select a student and ensure they have assigned courses."/>
                </placeholder>
            </TableView>

            <!-- Special Events & IEP Meetings This Week -->
            <VBox spacing="8" styleClass="card, metric-warning">
                <Label text="Special Events &amp; IEP Meetings This Week" styleClass="header-13-warning-deep"/>
                <TableView fx:id="eventsTable" prefHeight="120" maxHeight="150">
                    <columns>
                        <TableColumn fx:id="eventDayColumn" text="Day" prefWidth="100"/>
                        <TableColumn fx:id="eventTimeColumn" text="Time" prefWidth="100"/>
                        <TableColumn fx:id="eventTypeColumn" text="Type" prefWidth="120"/>
                        <TableColumn fx:id="eventNameColumn" text="Event/Meeting" prefWidth="250"/>
                        <TableColumn fx:id="eventLocationColumn" text="Location" prefWidth="100"/>
                        <TableColumn fx:id="eventNotesColumn" text="Notes" prefWidth="200"/>
                    </columns>
                    <placeholder>
                        <Label text="No special events or IEP meetings scheduled this week" styleClass="text-muted"/>
                    </placeholder>
                </TableView>
            </VBox>

            <!-- Summary Information -->
            <HBox spacing="20" styleClass="card">
                <VBox spacing="5">
                    <Label text="Schedule Summary" style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                    <HBox spacing="10">
                        <Label text="Total Classes:" styleClass="form-label"/>
                        <Label fx:id="totalClassesLabel" text="0"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="Total Credits:" styleClass="form-label"/>
                        <Label fx:id="totalCreditsLabel" text="0.0"/>
                    </HBox>
                </VBox>

                <Separator orientation="VERTICAL"/>

                <VBox spacing="5">
                    <Label text="Special Accommodations" style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                    <Label fx:id="accommodationsLabel" wrapText="true" maxWidth="400"
                           text="No special accommodations"/>
                </VBox>

                <Region HBox.hgrow="ALWAYS"/>

                <VBox spacing="5">
                    <Label text="Medical Alerts" styleClass="header-14-danger"/>
                    <Label fx:id="medicalAlertsLabel" wrapText="true" maxWidth="300"
                           styleClass="text-muted" text="None"/>
                </VBox>
            </HBox>
        </VBox>
    </center>

    <bottom>
        <HBox spacing="10" alignment="CENTER_LEFT" styleClass="card">
            <padding>
                <Insets top="10" right="20" bottom="10" left="20"/>
            </padding>
            <Label fx:id="statusLabel" text="Ready" style="-fx-font-style: italic;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label fx:id="timestampLabel" text="" styleClass="text-muted-10"/>
        </HBox>
    </bottom>

</BorderPane>
