<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.heronix.ui.controller.GiftedAssessmentIdentificationController"
            prefWidth="1400" prefHeight="900">


    <!-- Top: Header -->
    <top>
        <VBox spacing="15" styleClass="card">
            <Label text="Gifted Assessment &amp; Identification"
                   styleClass="page-title-white"/>
            <Label text="Comprehensive assessment tracking for gifted screening, cognitive testing, and eligibility determination"
                   styleClass="text-white"/>
        </VBox>
    </top>

    <!-- Center: Main Content -->
    <center>
        <ScrollPane fitToWidth="true" styleClass="main-container">
            <VBox spacing="25" style="-fx-padding: 25;">

                <!-- Student & Assessment Information -->
                <VBox spacing="15" styleClass="card-white-bordered">
                    <Label text="Student &amp; Assessment Information" styleClass="section-title"/>

                    <GridPane hgap="15" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                        </columnConstraints>

                        <Label text="Gifted Student:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <ComboBox fx:id="giftedStudentComboBox" promptText="Select Student..." maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                        <Label text="Grade:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                        <TextField fx:id="gradeField" editable="false" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                        <Label text="Assessment Type:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <ComboBox fx:id="assessmentTypeComboBox" promptText="Select Type..." maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                        <Label text="Assessment Name:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                        <TextField fx:id="assessmentNameField" promptText="e.g., CogAT Form 7" GridPane.columnIndex="3" GridPane.rowIndex="1"/>

                        <Label text="Assessment Date:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                        <DatePicker fx:id="assessmentDatePicker" maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                        <Label text="Assessment Purpose:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="2"/>
                        <ComboBox fx:id="assessmentPurposeComboBox" promptText="Select Purpose..." maxWidth="Infinity" GridPane.columnIndex="3" GridPane.rowIndex="2"/>
                    </GridPane>
                </VBox>

                <!-- Overall Scores -->
                <VBox spacing="15" styleClass="card-white-bordered">
                    <Label text="Overall Scores" styleClass="section-title"/>

                    <GridPane hgap="15" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="20"/>
                        </columnConstraints>

                        <Label text="Overall Score:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <TextField fx:id="overallScoreField" promptText="Score" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                        <Label text="Composite Score:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                        <TextField fx:id="compositeScoreField" promptText="Composite" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                        <Label text="Percentile Rank:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <TextField fx:id="percentileRankField" promptText="0-100" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                        <Label text="Standard Score:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                        <TextField fx:id="standardScoreField" promptText="Standard" GridPane.columnIndex="3" GridPane.rowIndex="1"/>

                        <Label text="Scaled Score:" styleClass="form-label" GridPane.columnIndex="4" GridPane.rowIndex="1"/>
                        <TextField fx:id="scaledScoreField" promptText="Scaled" GridPane.columnIndex="4" GridPane.rowIndex="0"/>
                    </GridPane>
                </VBox>

                <!-- Cognitive/IQ Assessment -->
                <VBox spacing="15" styleClass="card, metric-info">
                    <Label text="Cognitive/IQ Assessment Scores" styleClass="section-title-16-blue"/>

                    <GridPane hgap="15" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="20"/>
                        </columnConstraints>

                        <Label text="Full Scale IQ:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <TextField fx:id="fullScaleIqField" promptText="e.g., 130" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                        <Label text="Verbal IQ:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                        <TextField fx:id="verbalIqField" promptText="VIQ" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                        <Label text="Performance IQ:" styleClass="form-label" GridPane.columnIndex="4" GridPane.rowIndex="0"/>
                        <TextField fx:id="performanceIqField" promptText="PIQ" GridPane.columnIndex="4" GridPane.rowIndex="0"/>

                        <Label text="Working Memory:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <TextField fx:id="workingMemoryIndexField" promptText="WMI" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                        <Label text="Processing Speed:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                        <TextField fx:id="processingSpeedIndexField" promptText="PSI" GridPane.columnIndex="3" GridPane.rowIndex="1"/>
                    </GridPane>
                </VBox>

                <!-- Achievement Scores -->
                <VBox spacing="15" styleClass="card-white-bordered">
                    <Label text="Achievement Scores" styleClass="section-title"/>

                    <GridPane hgap="15" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="15"/>
                            <ColumnConstraints percentWidth="15"/>
                            <ColumnConstraints percentWidth="15"/>
                            <ColumnConstraints percentWidth="15"/>
                            <ColumnConstraints percentWidth="20"/>
                        </columnConstraints>

                        <Label text="" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <Label text="Reading" styleClass="form-label" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                        <Label text="Math" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                        <Label text="Writing" styleClass="form-label" GridPane.columnIndex="3" GridPane.rowIndex="0"/>
                        <Label text="Science" styleClass="form-label" GridPane.columnIndex="4" GridPane.rowIndex="0"/>
                        <Label text="Average %" styleClass="form-label" GridPane.columnIndex="5" GridPane.rowIndex="0"/>

                        <Label text="Score:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <TextField fx:id="readingScoreField" promptText="Score" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                        <TextField fx:id="mathScoreField" promptText="Score" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                        <TextField fx:id="writingScoreField" promptText="Score" GridPane.columnIndex="3" GridPane.rowIndex="1"/>
                        <TextField fx:id="scienceScoreField" promptText="Score" GridPane.columnIndex="4" GridPane.rowIndex="1"/>
                        <TextField fx:id="averageAchievementField" editable="false" promptText="Auto-calculated" GridPane.columnIndex="5" GridPane.rowIndex="1"/>

                        <Label text="Percentile:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                        <TextField fx:id="readingPercentileField" promptText="0-100" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                        <TextField fx:id="mathPercentileField" promptText="0-100" GridPane.columnIndex="2" GridPane.rowIndex="2"/>
                        <TextField fx:id="writingPercentileField" promptText="0-100" GridPane.columnIndex="3" GridPane.rowIndex="2"/>
                        <TextField fx:id="sciencePercentileField" promptText="0-100" GridPane.columnIndex="4" GridPane.rowIndex="2"/>
                    </GridPane>
                </VBox>

                <!-- Creativity & Other Scores -->
                <VBox spacing="15" styleClass="card">
                    <Label text="Creativity &amp; Other Scores" styleClass="section-title-16-purple"/>

                    <GridPane hgap="15" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                        </columnConstraints>

                        <Label text="Creativity Score:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <TextField fx:id="creativityScoreField" promptText="Score" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                        <Label text="Creativity Percentile:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                        <TextField fx:id="creativityPercentileField" promptText="0-100" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                        <Label text="Leadership Score:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <TextField fx:id="leadershipScoreField" promptText="Score" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                        <Label text="Arts Score:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                        <TextField fx:id="artsScoreField" promptText="Score" GridPane.columnIndex="3" GridPane.rowIndex="1"/>
                    </GridPane>
                </VBox>

                <!-- Eligibility & Recommendations -->
                <VBox spacing="15" styleClass="card">
                    <Label text="Eligibility &amp; Recommendations" styleClass="section-title-16-gold"/>

                    <GridPane hgap="15" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                        </columnConstraints>

                        <Label text="Meets Criteria:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <CheckBox fx:id="meetsEligibilityCriteriaCheckBox" text="Meets Eligibility Criteria" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                        <Label text="Threshold Score:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                        <TextField fx:id="eligibilityThresholdScoreField" promptText="Cutoff score" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                        <Label text="Recommended:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <CheckBox fx:id="recommendedForServicesCheckBox" text="Recommended for Services" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                        <Label text="Recommended Area:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                        <ComboBox fx:id="recommendedAreaComboBox" promptText="Select Area..." maxWidth="Infinity" GridPane.columnIndex="3" GridPane.rowIndex="1"/>

                        <Label text="Recommendations:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                        <TextArea fx:id="recommendationsArea" promptText="Recommendations for program placement and services" wrapText="true" prefRowCount="3" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="2"/>
                    </GridPane>
                </VBox>

                <!-- Administration Details -->
                <VBox spacing="15" styleClass="card-white-bordered">
                    <Label text="Administration Details" styleClass="section-title"/>

                    <GridPane hgap="15" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="75"/>
                        </columnConstraints>

                        <Label text="Administrator:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <ComboBox fx:id="administratorComboBox" promptText="Select Administrator..." maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                        <Label text="Location:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <TextField fx:id="administrationLocationField" promptText="Testing location" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                        <Label text="Testing Conditions:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                        <TextArea fx:id="testingConditionsArea" promptText="Testing environment, accommodations, observer notes" wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                    </GridPane>
                </VBox>

                <!-- Results & Reporting -->
                <VBox spacing="15" styleClass="card, metric-danger">
                    <Label text="Results &amp; Reporting" styleClass="section-title-16-red"/>

                    <GridPane hgap="15" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="25"/>
                        </columnConstraints>

                        <Label text="Results Received:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <DatePicker fx:id="resultsReceivedDatePicker" maxWidth="Infinity" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                        <Label text="Valid Score:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                        <CheckBox fx:id="validScoreCheckBox" text="Score is valid" selected="true" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                        <Label text="Invalidation Reason:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <TextField fx:id="invalidationReasonField" promptText="Reason if score is invalid" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="1"/>

                        <Label text="Parent Notified:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                        <CheckBox fx:id="parentNotificationSentCheckBox" text="Parent notification sent" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                        <Label text="Notification Date:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="2"/>
                        <DatePicker fx:id="parentNotificationDatePicker" maxWidth="Infinity" GridPane.columnIndex="3" GridPane.rowIndex="2"/>
                    </GridPane>
                </VBox>

                <!-- Interpretation & Analysis -->
                <VBox spacing="15" styleClass="card-white-bordered">
                    <Label text="Interpretation &amp; Analysis" styleClass="section-title"/>

                    <GridPane hgap="15" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="75"/>
                        </columnConstraints>

                        <Label text="Interpretation:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <TextArea fx:id="interpretationArea" promptText="Professional interpretation of assessment results" wrapText="true" prefRowCount="3" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                        <Label text="Strengths Identified:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <TextArea fx:id="strengthsIdentifiedArea" promptText="Areas of exceptional ability or talent" wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                        <Label text="Areas for Development:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                        <TextArea fx:id="areasForDevelopmentArea" promptText="Areas where student could benefit from support" wrapText="true" prefRowCount="2" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                        <Label text="Notes:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                        <TextArea fx:id="notesArea" promptText="Additional notes and observations" wrapText="true" prefRowCount="3" GridPane.columnIndex="1" GridPane.rowIndex="3"/>
                    </GridPane>
                </VBox>

            </VBox>
        </ScrollPane>
    </center>

    <!-- Bottom: Action Buttons -->
    <bottom>
        <HBox spacing="15" alignment="CENTER_RIGHT" styleClass="footer-white-border">
            <Button fx:id="saveButton" text="Save" onAction="#handleSave"
                    styleClass="button-primary"/>
            <Button fx:id="cancelButton" text="Cancel" onAction="#handleCancel"
                    styleClass="header-danger"/>
        </HBox>
    </bottom>

</BorderPane>
