<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<!--
    Schedule View - Interactive Master Schedule Grid
    Location: src/main/resources/fxml/ScheduleView.fxml
    
    Complete implementation with:
    âœ… Color-coded schedule blocks
    âœ… Interactive hover effects
    âœ… Detailed tooltips
    âœ… Filter and search
    âœ… Multiple view modes
    âœ… Conflict detection
    
    @version 2.0.0
    @since 2025-10-11
-->
<BorderPane xmlns="http://javafx.com/javafx"
    xmlns:fx="http://javafx.com/fxml"
    fx:id="mainContainer"
    fx:controller="com.heronix.ui.controller.ScheduleViewController"
    prefWidth="1500" prefHeight="950"
    styleClass="card">

    <!-- ================================================================ -->
    <!-- TOP: HEADER & TOOLBAR                                            -->
    <!-- ================================================================ -->
    <top>
        <VBox>
            <!-- Header -->
            <HBox styleClass="header-gradient">
                <VBox spacing="5" HBox.hgrow="ALWAYS">
                    <Label text="ðŸ“… Master Schedule Grid" textFill="white">
                        <font>
                            <Font name="System Bold" size="28" />
                        </font>
                    </Label>
                    <Label text="Interactive schedule viewer with color-coded conflict detection"
                        textFill="#bdc3c7">
                        <font>
                            <Font size="14" />
                        </font>
                    </Label>
                </VBox>

                <!-- Statistics Panel -->
                <VBox spacing="8" alignment="CENTER_RIGHT" style="-fx-padding: 0 20 0 0;">
                    <HBox spacing="15">
                        <VBox alignment="CENTER_RIGHT">
                            <Label text="TOTAL SLOTS" textFill="#bdc3c7" style="-fx-font-size: 10;"/>
                            <Label fx:id="totalSlotsLabel" text="0" textFill="white" 
                                   style="-fx-font-size: 18; -fx-font-weight: bold;"/>
                        </VBox>
                        <Separator orientation="VERTICAL" styleClass="card"/>
                        <VBox alignment="CENTER_RIGHT">
                            <Label text="CONFLICTS" textFill="#bdc3c7" style="-fx-font-size: 10;"/>
                            <Label fx:id="conflictCountLabel" text="0" textFill="#e74c3c" 
                                   style="-fx-font-size: 18; -fx-font-weight: bold;"/>
                        </VBox>
                    </HBox>
                </VBox>
            </HBox>

            <!-- Toolbar -->
            <ToolBar fx:id="toolbar" styleClass="toolbar-white-bordered">
                <HBox spacing="20" alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
                    
                    <!-- Schedule Selector -->
                    <VBox spacing="3">
                        <Label text="Select Schedule" styleClass="text-muted"/>
                        <ComboBox fx:id="scheduleComboBox" prefWidth="250" promptText="Choose a schedule...">
                            <tooltip>
                                <Tooltip text="Select a schedule to view"/>
                            </tooltip>
                        </ComboBox>
                    </VBox>
                    
                    <Separator orientation="VERTICAL"/>
                    
                    <!-- View Mode Selector -->
                    <VBox spacing="3">
                        <Label text="View Mode" styleClass="text-muted"/>
                        <ComboBox fx:id="viewModeComboBox" prefWidth="150" promptText="Week View">
                            <tooltip>
                                <Tooltip text="Change how the schedule is displayed"/>
                            </tooltip>
                        </ComboBox>
                    </VBox>
                    
                    <Separator orientation="VERTICAL"/>
                    
                    <!-- Search -->
                    <VBox spacing="3">
                        <Label text="Search" styleClass="text-muted"/>
                        <TextField fx:id="searchField" promptText="ðŸ” Search courses, teachers, rooms..."
                                   prefWidth="300"
                                   styleClass="search-field-rounded">
                            <tooltip>
                                <Tooltip text="Type to filter schedule by course, teacher, or room"/>
                            </tooltip>
                        </TextField>
                    </VBox>
                    
                    <Region HBox.hgrow="ALWAYS"/>
                    
                    <!-- Action Buttons -->
                    <HBox spacing="10">
                        <Button fx:id="undoButton" text="â†¶ Undo" 
                                styleClass="button-primary">
                            <tooltip>
                                <Tooltip text="Undo last change (Ctrl+Z)"/>
                            </tooltip>
                        </Button>
                        
                        <Button fx:id="redoButton" text="â†· Redo" 
                                styleClass="button-primary">
                            <tooltip>
                                <Tooltip text="Redo last undone change (Ctrl+Y)"/>
                            </tooltip>
                        </Button>
                        
                        <Separator orientation="VERTICAL"/>
                        
                        <Button fx:id="refreshButton" text="ðŸ”„ Refresh" 
                                styleClass="button-primary">
                            <tooltip>
                                <Tooltip text="Reload schedule data"/>
                            </tooltip>
                        </Button>
                        
                        <Button fx:id="exportButton" text="ðŸ“¤ Export" 
                                styleClass="button-primary">
                            <tooltip>
                                <Tooltip text="Export to PDF, Excel, or iCalendar"/>
                            </tooltip>
                        </Button>
                        
                        <Button fx:id="printButton" text="ðŸ–¨ï¸ Print" 
                                styleClass="button-primary">
                            <tooltip>
                                <Tooltip text="Print schedule"/>
                            </tooltip>
                        </Button>
                    </HBox>
                    
                </HBox>
            </ToolBar>
            
        </VBox>
    </top>

    <!-- ================================================================ -->
    <!-- LEFT: FILTER PANEL                                               -->
    <!-- ================================================================ -->
    <left>
        <VBox fx:id="filterPanel" spacing="15"
              styleClass="filter-panel-left"
              prefWidth="280">
            
            <!-- Filter Header -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="ðŸ” Filters" styleClass="section-title-filters-slate"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button fx:id="clearFiltersButton" text="Clear"
                        styleClass="button-link-blue">
                    <tooltip>
                        <Tooltip text="Clear all filters"/>
                    </tooltip>
                </Button>
            </HBox>
            
            <Separator/>
            
            <!-- Teacher Filter -->
            <VBox spacing="5">
                <Label text="ðŸ‘¤ Teacher" styleClass="form-label"/>
                <ComboBox fx:id="teacherFilterCombo" prefWidth="240" promptText="All Teachers">
                    <tooltip>
                        <Tooltip text="Filter by teacher"/>
                    </tooltip>
                </ComboBox>
            </VBox>
            
            <!-- Course Filter -->
            <VBox spacing="5">
                <Label text="ðŸ“š Course" styleClass="form-label"/>
                <ComboBox fx:id="courseFilterCombo" prefWidth="240" promptText="All Courses">
                    <tooltip>
                        <Tooltip text="Filter by course"/>
                    </tooltip>
                </ComboBox>
            </VBox>
            
            <!-- Room Filter -->
            <VBox spacing="5">
                <Label text="ðŸ« Room" styleClass="form-label"/>
                <ComboBox fx:id="roomFilterCombo" prefWidth="240" promptText="All Rooms">
                    <tooltip>
                        <Tooltip text="Filter by room"/>
                    </tooltip>
                </ComboBox>
            </VBox>
            
            <!-- Department Filter -->
            <VBox spacing="5">
                <Label text="ðŸŽ“ Department" styleClass="form-label"/>
                <ComboBox fx:id="departmentFilterCombo" prefWidth="240" promptText="All Departments">
                    <tooltip>
                        <Tooltip text="Filter by department"/>
                    </tooltip>
                </ComboBox>
            </VBox>
            
            <Separator/>
            
            <!-- Legend -->
            <VBox spacing="10">
                <Label text="ðŸ“Š Color Legend" styleClass="form-label"/>
                
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Region styleClass="legend-normal"/>
                    <Label text="Normal" styleClass="text-muted"/>
                </HBox>
                
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Region styleClass="legend-warning"/>
                    <Label text="Warning" styleClass="text-muted"/>
                </HBox>
                
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Region styleClass="legend-conflict"/>
                    <Label text="Conflict" styleClass="text-muted"/>
                </HBox>
                
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Region styleClass="legend-event"/>
                    <Label text="Event" styleClass="text-muted"/>
                </HBox>
                
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Region styleClass="legend-unavailable"/>
                    <Label text="Unavailable" styleClass="text-muted"/>
                </HBox>
            </VBox>
            
            <Region VBox.vgrow="ALWAYS"/>
            
            <!-- Tips -->
            <VBox spacing="8" styleClass="card">
                <Label text="ðŸ’¡ Quick Tips" styleClass="text-muted"/>
                <Label text="â€¢ Drag blocks to move them" wrapText="true" styleClass="text-muted-small"/>
                <Label text="â€¢ Green zones = valid drop" wrapText="true" styleClass="text-muted-small"/>
                <Label text="â€¢ Red zones = conflict" wrapText="true" styleClass="text-muted-small"/>
                <Label text="â€¢ Double-click to quick edit" wrapText="true" styleClass="text-muted-small"/>
                <Label text="â€¢ Hover for details" wrapText="true" styleClass="text-muted-small"/>
            </VBox>
            
        </VBox>
    </left>

    <!-- ================================================================ -->
    <!-- CENTER: SCHEDULE GRID                                            -->
    <!-- ================================================================ -->
    <center>
        <StackPane styleClass="card">
            
            <!-- Scroll Pane for Grid -->
            <ScrollPane fx:id="scheduleScrollPane" 
                       fitToWidth="true"
                       fitToHeight="true"
                       style="-fx-background-color: transparent; -fx-background: transparent;">
                
                <!-- Main Grid -->
                <GridPane fx:id="scheduleGrid" 
                         styleClass="card">
                    <!-- Grid will be populated dynamically by controller -->
                    <!-- Headers, time labels, and schedule blocks are created in Java -->
                </GridPane>
                
            </ScrollPane>
            
        </StackPane>
    </center>

    <!-- ================================================================ -->
    <!-- BOTTOM: STATUS BAR                                               -->
    <!-- ================================================================ -->
    <bottom>
        <HBox fx:id="statusBar" spacing="20" alignment="CENTER_LEFT"
              styleClass="status-bar-white">
            
            <Label fx:id="statusLabel" text="âœ… Ready"
                   styleClass="stat-value-13-success-bold"/>
            
            <Separator orientation="VERTICAL"/>
            
            <Label text="ðŸ’¡ Drag schedule blocks to move them â€¢ Double-click to edit â€¢ Green zones = valid, Red = conflict" 
                   styleClass="text-muted"/>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <Label text="Heronix Scheduling System v2.0" 
                   styleClass="text-muted"/>
            
        </HBox>
    </bottom>

</BorderPane>