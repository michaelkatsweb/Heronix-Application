<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<!--
    SPED Dashboard
    Comprehensive view of Special Education services, IEP compliance, and scheduling

    Location: src/main/resources/fxml/SPEDDashboard.fxml
-->

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.heronix.ui.controller.SPEDDashboardController"
            styleClass="main-container">


    <!-- HEADER -->
    <top>
        <VBox styleClass="header-section">
            <HBox alignment="CENTER_LEFT" spacing="20" styleClass="page-header">
                <padding>
                    <Insets top="15" right="20" bottom="15" left="20"/>
                </padding>
                <Label text="Special Education Dashboard" styleClass="page-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="Refresh" onAction="#handleRefresh" styleClass="button-secondary"/>
                <Button text="Export Report" onAction="#handleExportReport" styleClass="button-secondary"/>
                <Button text="+ Add IEP" onAction="#handleAddIEP" styleClass="button-primary"/>
            </HBox>
        </VBox>
    </top>

    <!-- MAIN CONTENT -->
    <center>
        <ScrollPane fitToWidth="true" styleClass="scroll-pane">
            <VBox spacing="20" styleClass="content-container">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>

                <!-- ========== OVERVIEW METRICS ========== -->
                <HBox spacing="15" styleClass="metrics-row">
                    <!-- Active IEPs Card -->
                    <VBox styleClass="card metric-card" HBox.hgrow="ALWAYS">
                        <Label text="Active IEPs" styleClass="metric-label"/>
                        <Label fx:id="activeIEPsLabel" text="--" styleClass="metric-value"/>
                    </VBox>

                    <!-- Active 504 Plans Card -->
                    <VBox styleClass="card metric-card" HBox.hgrow="ALWAYS">
                        <Label text="Active 504 Plans" styleClass="metric-label"/>
                        <Label fx:id="active504Label" text="--" styleClass="metric-value"/>
                    </VBox>

                    <!-- Needs Scheduling Card -->
                    <VBox styleClass="card metric-card" HBox.hgrow="ALWAYS">
                        <Label text="Needs Scheduling" styleClass="metric-label"/>
                        <Label fx:id="needsSchedulingLabel" text="--" styleClass="metric-value"/>
                    </VBox>

                    <!-- Action Items Card -->
                    <VBox styleClass="card metric-card" HBox.hgrow="ALWAYS">
                        <Label text="Action Items" styleClass="metric-label"/>
                        <Label fx:id="actionItemsCountLabel" text="--" styleClass="metric-value"/>
                    </VBox>
                </HBox>

                <!-- ========== COMPLIANCE RATE ========== -->
                <VBox spacing="10" styleClass="card">
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Label text="Compliance Rate" styleClass="section-title"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="complianceRateLabel" text="--%" styleClass="metric-value"/>
                    </HBox>
                    <ProgressBar fx:id="complianceProgress" prefWidth="Infinity" prefHeight="20"
                                 styleClass="compliance-progress"/>
                </VBox>

                <!-- ========== STATISTICS SECTION ========== -->
                <HBox spacing="15">
                    <!-- IEP Statistics -->
                    <VBox fx:id="iepStatsContainer" spacing="8" styleClass="card" HBox.hgrow="ALWAYS">
                        <Label text="IEP Statistics" styleClass="section-title"/>
                    </VBox>

                    <!-- Service Statistics -->
                    <VBox fx:id="serviceStatsContainer" spacing="8" styleClass="card" HBox.hgrow="ALWAYS">
                        <Label text="Service Statistics" styleClass="section-title"/>
                    </VBox>
                </HBox>

                <!-- ========== ACTION ITEMS TABS ========== -->
                <TabPane fx:id="actionItemsTabs" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS"
                         styleClass="action-tabs">

                    <!-- Expiring IEPs Tab -->
                    <Tab text="Expiring IEPs" closable="false">
                        <VBox spacing="10" styleClass="tab-content">
                            <padding>
                                <Insets top="15" right="15" bottom="15" left="15"/>
                            </padding>
                            <TableView fx:id="expiringIEPsTable" VBox.vgrow="ALWAYS" styleClass="data-table">
                                <columns>
                                    <TableColumn fx:id="iepStudentColumn" text="Student" prefWidth="200" minWidth="150"/>
                                    <TableColumn fx:id="iepNumberColumn" text="IEP Number" prefWidth="120" minWidth="100"/>
                                    <TableColumn fx:id="iepEndDateColumn" text="End Date" prefWidth="100" minWidth="90"/>
                                    <TableColumn fx:id="iepDaysRemainingColumn" text="Days Left" prefWidth="80" minWidth="70"/>
                                    <TableColumn fx:id="iepCaseManagerColumn" text="Case Manager" prefWidth="150" minWidth="120"/>
                                    <TableColumn fx:id="iepActionsColumn" text="Actions" prefWidth="100" minWidth="80"/>
                                </columns>
                                <placeholder>
                                    <Label text="No IEPs expiring within 30 days"/>
                                </placeholder>
                            </TableView>
                        </VBox>
                    </Tab>

                    <!-- Expiring 504 Plans Tab -->
                    <Tab text="Expiring 504 Plans" closable="false">
                        <VBox spacing="10" styleClass="tab-content">
                            <padding>
                                <Insets top="15" right="15" bottom="15" left="15"/>
                            </padding>
                            <TableView fx:id="expiring504Table" VBox.vgrow="ALWAYS" styleClass="data-table">
                                <columns>
                                    <TableColumn fx:id="plan504StudentColumn" text="Student" prefWidth="200" minWidth="150"/>
                                    <TableColumn fx:id="plan504NumberColumn" text="Plan Number" prefWidth="120" minWidth="100"/>
                                    <TableColumn fx:id="plan504EndDateColumn" text="End Date" prefWidth="100" minWidth="90"/>
                                    <TableColumn fx:id="plan504DaysRemainingColumn" text="Days Left" prefWidth="80" minWidth="70"/>
                                    <TableColumn fx:id="plan504CoordinatorColumn" text="Coordinator" prefWidth="150" minWidth="120"/>
                                    <TableColumn fx:id="plan504ActionsColumn" text="Actions" prefWidth="100" minWidth="80"/>
                                </columns>
                                <placeholder>
                                    <Label text="No 504 Plans expiring within 30 days"/>
                                </placeholder>
                            </TableView>
                        </VBox>
                    </Tab>

                    <!-- Services Below Minutes Tab -->
                    <Tab text="Services Below Minutes" closable="false">
                        <VBox spacing="10" styleClass="tab-content">
                            <padding>
                                <Insets top="15" right="15" bottom="15" left="15"/>
                            </padding>
                            <TableView fx:id="belowMinutesTable" VBox.vgrow="ALWAYS" styleClass="data-table">
                                <columns>
                                    <TableColumn fx:id="serviceStudentColumn" text="Student" prefWidth="200" minWidth="150"/>
                                    <TableColumn fx:id="serviceTypeColumn" text="Service Type" prefWidth="150" minWidth="120"/>
                                    <TableColumn fx:id="requiredMinutesColumn" text="Required" prefWidth="100" minWidth="80"/>
                                    <TableColumn fx:id="scheduledMinutesColumn" text="Scheduled" prefWidth="100" minWidth="80"/>
                                    <TableColumn fx:id="compliancePercentColumn" text="Compliance" prefWidth="100" minWidth="80"/>
                                    <TableColumn fx:id="serviceActionsColumn" text="Actions" prefWidth="100" minWidth="80"/>
                                </columns>
                                <placeholder>
                                    <Label text="All services are meeting required minutes"/>
                                </placeholder>
                            </TableView>
                        </VBox>
                    </Tab>
                </TabPane>

            </VBox>
        </ScrollPane>
    </center>

</BorderPane>
