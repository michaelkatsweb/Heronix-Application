# ============================================================================
# Heronix SIS - Environment Variables
# Copy this file to .env and update values for your environment
# IMPORTANT: Never commit .env file to version control!
# ============================================================================

# ==========================================================================
# DATABASE CONFIGURATION
# ==========================================================================
# PostgreSQL password (REQUIRED - change from default!)
DB_PASSWORD=change_this_to_a_strong_password_min_16_chars

# Connection pool sizing for high concurrency (500+ users)
HIKARI_MAX_POOL_SIZE=100
HIKARI_MIN_IDLE=20

# ==========================================================================
# SECURITY CONFIGURATION
# ==========================================================================
# JWT secret key - MUST be at least 256 bits (32+ characters)
# Generate with: openssl rand -base64 32
JWT_SECRET=CHANGE_THIS_generate_with_openssl_rand_base64_32

# JWT token expiration (milliseconds)
# Default: 86400000 (24 hours)
JWT_EXPIRATION=86400000

# JWT refresh token expiration (milliseconds)
# Default: 604800000 (7 days)
JWT_REFRESH_EXPIRATION=604800000

# ==========================================================================
# CORS CONFIGURATION
# ==========================================================================
# Comma-separated list of allowed origins
# Example: https://app.heronixedu.com,https://admin.heronixedu.com
CORS_ALLOWED_ORIGINS=

# ==========================================================================
# RATE LIMITING
# ==========================================================================
# Authenticated user rate limit (requests per hour)
HERONIX_SECURITY_RATE_LIMITING_DEFAULT_LIMIT=5000

# Unauthenticated rate limit (requests per hour)
HERONIX_SECURITY_RATE_LIMITING_UNAUTHENTICATED_LIMIT=100

# ==========================================================================
# EMAIL CONFIGURATION (Optional)
# ==========================================================================
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USERNAME=noreply@heronixedu.com
# SMTP_PASSWORD=your_email_password
# SMTP_TLS_ENABLED=true

# ==========================================================================
# MONITORING (Optional)
# ==========================================================================
# Enable Prometheus metrics export
# MANAGEMENT_METRICS_EXPORT_PROMETHEUS_ENABLED=true

# ==========================================================================
# SSL/TLS CONFIGURATION (Optional)
# ==========================================================================
# Path to SSL certificate and key for HTTPS
# SSL_CERTIFICATE_PATH=/etc/ssl/certs/heronix.crt
# SSL_KEY_PATH=/etc/ssl/private/heronix.key

# ==========================================================================
# OFFLINE MODE - Complete Network Isolation
# ==========================================================================
# Enable strict offline mode (blocks ALL external network calls)
HERONIX_OFFLINE_MODE=true

# Disable email notifications in offline mode
HERONIX_DISABLE_EMAIL=true

# ==========================================================================
# OFFLINE MODE DETAILS
# When HERONIX_OFFLINE_MODE=true, the following are enforced:
# - All external HTTP/HTTPS calls are blocked
# - Only localhost/internal network communication allowed
# - CDN resources replaced with local vendor assets
# - Email notifications disabled
# - Webhooks to external systems disabled
# - State education department lookups disabled
# - Strict Content Security Policy enforced
#
# Before enabling offline mode, run:
#   scripts/download-vendor-assets.bat (Windows)
#   scripts/download-vendor-assets.sh (Linux/Mac)
# to download required frontend libraries locally.
# ==========================================================================

# ==========================================================================
# SECURE GATEWAY - External Communication Proxy
# ==========================================================================
# ALL external communications (emails, district sync, parent notifications)
# MUST pass through the Secure Gateway, which:
# - Verifies receiving devices are registered and approved
# - Sanitizes data to remove identifying information
# - Encrypts all data before transmission
# - Logs all transmission attempts for audit

# Master encryption key for device symmetric keys (REQUIRED in production)
# Generate with: openssl rand -base64 32
HERONIX_GATEWAY_MASTER_KEY=CHANGE_THIS_generate_with_openssl_rand_base64_32

# ==========================================================================
# DEVICE REGISTRATION REQUIREMENTS
# ==========================================================================
# Before any external system can receive data:
# 1. Device must be registered via /api/v1/gateway/devices/register
# 2. Device must provide:
#    - Unique device ID
#    - Organization name
#    - Public key certificate (PEM format)
#    - Allowed IP ranges (CIDR notation)
# 3. Admin must approve device via /api/v1/gateway/devices/{id}/approve
# 4. Admin grants specific data permissions:
#    - STUDENT_BASIC_INFO: Name, grade (anonymized)
#    - STUDENT_ATTENDANCE: Attendance records
#    - STUDENT_GRADES: Academic performance
#    - SEND_ATTENDANCE_ALERTS: Attendance notifications
#    - SEND_GRADE_UPDATES: Grade notifications
#    - AGGREGATE_STATISTICS: School-level stats only
#
# Unregistered devices receive NO DATA.
# ==========================================================================
